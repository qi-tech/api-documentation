# Webhooks

Após o envio de uma solicitação de conta com sucesso, o resto do fluxo
fica a cargo da QI Tech. O acompanhamento da operação é dado via
Webhooks seguindo o [fluxo previamente estipulado](?file=552). O padrão
utilizado é: em caso de sucesso é enviado um webhook informando a nova
etapa do processo que a emissão está, em caso de falha a operação é
rejeitada e o processo é encerrado.

### Conta de Livre Movimentação

Em caso de sucesso:

```json
{
   "webhook_type": "account",
   "key": KEY,
   "event_datetime": DATA E HORA DA OCORRÊNCIA,
   "status":NOVA ETAPA EM QUE ESTÁ O PROCESSO,
   "data": INFORMAÇÕES EXTRAS DA ETAPA
}
```
<br>


Em caso de falha:

```json
{
   "webhook_type": "account",
   "key": KEY,
   "event_datetime": DATA E HORA DA OCORRÊNCIA,
   "status": REJEIÇÃO DA ETAPA ATUAL,
}
```
<br>

### Conta Escrow

Em caso de sucesso:

```json
{
   "webhook_type": "escrow",
   "key": KEY,
   "event_datetime": DATA E HORA DA OCORRÊNCIA,
   "status":NOVA ETAPA EM QUE ESTÁ O PROCESSO,
   "data": INFORMAÇÕES EXTRAS DA ETAPA
}
```
<br>


Em caso de falha:

```json
{
   "webhook_type": "escrow",
   "key": KEY,
   "event_datetime": DATA E HORA DA OCORRÊNCIA,
   "status": REJEIÇÃO DA ETAPA ATUAL,
}
```
<br>

## Exemplos

### Conta de Livre Movimentação

1. **Aceite do dono da conta**

    Em caso de sucesso &rarr; criação da conta:
    ```json
    {
        "webhook_type": "account",
            "key": "f834af4d-ab4b-442f-96c9-f9940d8066d4",
            "status": "account_opened",
            "event_datetime": "2019-11-04 16:52:49",
            "data": {
                "account_info": {
                    "account_branch": "0001",
                    "account_digit": "3",
                    "account_number": "70091",
                    "financial_institution_code": "329"
                },
                "account_owner": {
                    "name": "Aurora Simone Catarina Nogueira",
                    "document_number": "08141163701"
                }
            }
    }
    ```
    <br>
 
    Em caso de falha:
    ```json
    {
        "webhook_type": "account",
            "key": "f834af4d-ab4b-442f-96c9-f9940d8066d4",
            "status": "account_rejected",
            "event_datetime": "2019-11-04 16:52:49",
            "data": {
                "account_info": {
                    "account_branch": "0001",
                    "account_digit": "3",
                    "account_number": "70091",
                    "financial_institution_code": "329"
                },
                "account_owner": {
                    "name": "Aurora Simone Catarina Nogueira",
                    "document_number": "08141163701"
                }
            }
    }
    ```
    <br>

# Webhooks

Após o envio o envio de uma solicitação de dívida com sucesso o resto do fluxo fica a cargo da QI Tech. O acompanhamento da operação é dado via Webhooks seguindo o [fluxo previamente estipulado](?file=442).
O padrão utilizado é: em caso de sucesso é enviado um webhook informando a nova etapa do processo que a emissão esta, em caso de falha é informado a operação é rejeitada e o processo é encerrado.

Em caso de sucesso:

```json
{
   "webhook_type": "debt",
   "key": DEBT_KEY,
   "status":NOVA ETAPA EM QUE ESTÁ O PROCESSO,
   "data": INFORMAÇÕES EXTRAS DA ETAPA
}
```
<br>


Em caso de falha:

```json
{
   "debt_key":DEBT_KEY,
   "status":"rejected",
   "description":DESCRIÇÃO DO ERRO
}
```
<br>

1. **Validação de compliance**
    * Em caso de sucesso &rarr; assinatura:
      * status: "waiting_signature"
      * data: `--- UNDER CONSTRUCTION --`
    * Em caso de falha:
      * description:  “Rejected on compliance verification”
2. **Assinatura da CCB pelo tomador**
    * Em caso de sucesso &rarr; bloqueio de saldo:
      * status: “waiting_balance_block”
      * data: `null`
    * Em caso de falha:
      * description: "Rejected on signature"
3. **Bloqueio do valor requisitado na conta do solicitante**
    * Em caso de sucesso &rarr; desembolso:
      * status: "waiting_disbursement"
      * data: `null`
    * Em caso de falha:
      * description: "Insufficient funds"
4. **Desembolso da operação**
    * Em caso de sucesso &rarr; assinatura do termo de cessão:
      * status: “waiting_assignment_term_signature”
      * data: `null`
    * Em caso de falha:
      * description: "Disbursement failed"
5. **Assinatura do termo de cessão**
    * Em caso de sucesso &rarr; desbloqueio do saldo:
      * status: “waiting_balance_release”
      * data: `null`
    * Em caso de falha:
      * description: "Assignment Term signature failed"
6. **Desbloqueio do valor previamente bloqueado**
    * Em caso de sucesso &rarr; fim:
      * status: “debt_successfully_finished”
      * data: `null`
    * Em caso de falha:
      * description: "Balance release failed"


obs: Não é garantida ordem nem unicidade dos webhooks.
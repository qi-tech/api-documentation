# Solicitação de dívida

A API de dívida foi desenhada para, após um prévio envio dos arquivos, ser executada em apenas uma requisição. 

## Request

- endpoint: /debt
- method: POST
- body (antes de ser assinado):

```json
{
   "borrower":{
      "person_type":"legal",
      "name":"Parmalat",
      "trading_name":"Parmalat",
      "foundation_date":"2012-01-01",
      "company_document_number":"89940878025962",
      "email":"parmalat@yopmail.com",
      "company_type":"ltda",
      "phone":{
         "country_code":"055",
         "area_code":"11",
         "number":"999999999"
      },
      "cnae_code":"6499-9/99",
      "address":{
         "street":"Br 343",
         "state":"PI",
         "city":"Teresina",
         "neighborhood":"Gurupi",
         "number":"6080",
         "postal_code":"64091210",
         "complement":"complemento"
      },
      "company_representatives":[
         {
            "person_type":"natural",
            "name":"Patrícia Tereza Bernardes",
            "mother_name":"Maria Mariane",
            "birth_date":"1990-05-06",
            "profession":"Deputada",
            "nationality":"Brasileira",
            "marital_status":"married",
            "is_pep":true,
            "property_system":"total_communion_of_goods",
            "individual_document_number":"34651104630",
            "document_identification_number":"232479719",
            "email":"patricia.tereza@yopmail.com",
            "phone":{
               "country_code":"055",
               "area_code":"11",
               "number":"9128281359"
            },
            "address":{
               "street":"Passagem Mariana",
               "state":"PA",
               "city":"Ananindeua",
               "neighborhood":"Águas Lindas",
               "number":"660",
               "postal_code":"67118003",
               "complement":"complemento"
            },
            "spouse":null,
            "wedding_certificate":"69906ede-49c0-4021-981d-44f1136b1b53",
            "document_identification":"2db378a2-3a62-4689-a273-a70c7cdb205c",
            "proof_of_residence":"d3810134-ee8c-4a6b-ac1a-631fa751524c"
         }
      ],
      "company_statute":"3fbf62a1-9dd1-4b2b-9d69-6c57c8dc3278",
      "directors_election_minute":"3fbf62a1-9dd1-4b2b-9d69-6c57c8dc3278"
   },
   "guarantors":[
      {
         "person_type":"natural",
         "name":"Patrícia Tereza Bernardes",
         "mother_name":"Maria Mariane",
         "birth_date":"1990-05-06",
         "profession":"Deputada",
         "nationality":"Brasileira",
         "marital_status":"married",
         "is_pep":true,
         "property_system":"total_communion_of_goods",
         "individual_document_number":"34651104630",
         "document_identification_number":"232479719",
         "email":"patricia.tereza@yopmail.com",
         "phone":{
            "country_code":"055",
            "area_code":"11",
            "number":"9128281359"
         },
         "address":{
            "street":"Passagem Mariana",
            "state":"PA",
            "city":"Ananindeua",
            "neighborhood":"Águas Lindas",
            "number":"660",
            "postal_code":"67118003",
            "complement":"complemento"
         },
         "spouse":null,
         "wedding_certificate":"69906ede-49c0-4021-981d-44f1136b1b53",
         "document_identification":"2db378a2-3a62-4689-a273-a70c7cdb205c",
         "proof_of_residence":"d3810134-ee8c-4a6b-ac1a-631fa751524c"
      },
      {
         "person_type":"natural",
         "name":"Patrícia Tereza Bernardes",
         "mother_name":"Maria Mariane",
         "birth_date":"1990-05-06",
         "profession":"Deputada",
         "nationality":"Brasileira",
         "marital_status":"married",
         "is_pep":true,
         "property_system":"total_communion_of_goods",
         "individual_document_number":"34651104630",
         "document_identification_number":"232479719",
         "email":"patricia.tereza@yopmail.com",
         "phone":{
            "country_code":"055",
            "area_code":"11",
            "number":"9128281359"
         },
         "address":{
            "street":"Passagem Mariana",
            "state":"PA",
            "city":"Ananindeua",
            "neighborhood":"Águas Lindas",
            "number":"660",
            "postal_code":"67118003",
            "complement":"complemento"
         },
         "spouse":null,
         "wedding_certificate":"69906ede-49c0-4021-981d-44f1136b1b53",
         "document_identification":"2db378a2-3a62-4689-a273-a70c7cdb205c",
         "proof_of_residence":"d3810134-ee8c-4a6b-ac1a-631fa751524c"
      }
   ],
   "disbursement_bank_account":{
      "bank_code":"341",
      "branch_number":"7071",
      "account_number":"15570",
      "account_digit":"4"
   },
   "financial":{
      "amount":5000,
      "annual_interest_rate":2.32,
      "cdi_percentage":100,
      "disbursement_date":"2019-07-25",
      "fine_configuration":{
         "contract_fine_rate":0.02,
         "interest_base":"Base de dias",
         "monthly_rate":0.01
      },
      "interest_grace_period":0,
      "number_of_installments":10,
      "principal_grace_period":0,
      "rebate":100,
      "type":"Tipo de Juros"
   }
}
```

A princípio pode parecer um muita informação, no entanto, como veremos abaixo podemos quebrar obervar que esse objeto é composto por 4 partes.


## Atributos de uma emissão

A criação de uma emissão consiste em 4 objetos:

- borrower: tomador da dívida (que por sua vez pode ser um, objeto PF ou Objeto PJ)
- guarantors: garantidores da operação (que pode ser uma lista de Objeto PF e/ou Objeto PJ e não é um campo obrigatório)
- disbursement_bank_account: informações bancárias para o desenbolso
- financial: dados do fluxo financeiro da operação

Ou seja, enviando apenas:


```json
{
    "borrower": Objeto PJ ou Objeto PF,
    "guarantors": [Objeto PJ e/ou Objeto PF] ou nulo ou [],
    "disbursement_bank_account": Objeto Conta Bancária,
    "financial": Objeto Financeiro
}
```

### Objeto PJ

Como mostrado acima tanto o campo "borrower" quanto os campo "guarantors" podem ser populados por Objeto PF ou Objeto PJ. Objeto PJ é o descritivo de uma pessoa jurídica na QITech.

| Campo | Descrição | Exemplo
|---|---|---|
| person_type *(obrigatório)* | Identificador de que o objeto enviado é uma pessoa jurídica. Deve conter SEMPRE o  valor "legal" para Objeto PJ | "legal" |
| name *(obrigatório)* | Razão social | "Qi Tech Ltda."|
| trading_name *(obrigatório)* | Nome fantasia | "Qi Tech" |
| foundation_date *(obrigatório)* | Data de abertura da empresa (formato "AAAA-MM-DD") | "2018-06-05" |
| company_document_number *(obrigatório)*| CNPJ (em texto, apenas números, deve conter 14 caracteres)| "30620610000159" |
| email *(obrigatório)* | Email institucional da empresa | "api@qitech.work" |
| company_type *(obrigatório)* | Tipo da empresa: "ltda", "sa",  "micro_enterprise" ou  "freelancer"| "ltda" |
| cnae_code *(obrigatório)* | Classificação Nacional de Atividades Econômicas | "6499-9/99" |
| phone *(obrigatório)* | Telefone da empresa | **[Objeto Telefone](#objeto-telefone)** (descrito abaixo) |
| addresss *(obrigatório)* | Endereço da empresa | **[Objeto Endereço](#objeto-endereco)** (descrito abaixo) |
| company_representatives *(obrigatório)* | Lista de representantes legais da empresa | Lista de **[Objeto PF](#objeto-PF)** (descrito abaixo) |
| company_statute *(obrigatório)*| **DOCUMENT_KEY** PDF do estatuto da empresa ([enviado previamente](../3-Upload&#32;de&#32;documentos/3.1-Introdução.md))| "ff26d5cb-b4e4-477f-9341-645d3e1d65de" |
| directors_election_minute | Ata de eleição da empresa (obrigatório apenas para emrpresas com company_type "sa") | "8c33ccc4-18b5-4985-87fb-b8fbb9c56a65" |


Exemplo:

```json
{
   "person_type":"legal",
   "name":"Qi Tech",
   "trading_name":"Qi Tech Ltda.",
   "foundation_date":"2018-06-05",
   "company_document_number":"30620610000159",
   "email":"api@qitech.work",
   "company_type":"ltda",
   "phone": Objeto Telefone,
   "cnae_code":"6499-9/99",
   "address": Objeto Endereço,
   "company_representatives":[Objeto PF],
   "company_statute":"3fbf62a1-9dd1-4b2b-9d69-6c57c8dc3278",
   "directors_election_minute":"3fbf62a1-9dd1-4b2b-9d69-6c57c8dc3278"
}
```


### Objeto PF

Assim como o Objeto PF, descrito acima, os campos "borrower" e "guarantors" podem ser populados tanto por Objeto PF ou Objeto PJ. Objeto PF é o descritivo de uma pessoa física na QITech.

| Campo | Descrição | Exemplo
|---|---|---|
| person_type *(obrigatório)* | Identificador de que o objeto enviado é uma pessoa física. Deve conter SEMPRE o  valor "natural" para Objeto PF | "natural" |
| name *(obrigatório)* | Nome da pessoa | "Patrícia Tereza Bernardes" |
| mother_name *(obrigatório)* | Nome da mãe da pessoa | "Maria Mariane" |
| birth_date *(obrigatório)* | Data de nascimento da pessoa (formato "AAAA-MM-DD") | "1990-05-06" |
| profession *(obrigatório)* | Profissão da pessoa | "Deputada" |
| nationality *(obrigatório)* | Nacionalidade da pessoa | "nationality" |
| marital_status *(obrigatório)* | Estado civil da pessoa: "single", "married", "widower" ou "divorced" | "married" |
| property_system | Regime de separação de bens (obrigatório apenas para pessoas com marital_status "married"): "total_communion_of_goods", "partial_communion_of_goods", "total_separation_of_goods", "final_participation_of_acquisitions" ou "compulsory_separation_of_goods" | "total_communion_of_goods" |
| wedding_certificate *(obrigatório)* | **DOCUMENT_KEY** PDF do certificado de casamento da pessoa ([enviado previamente](?file=331)) | "56ab7849-4d90-490b-b539-96ac3c5a619b" |
| spouse *(obrigatório)* | [Objeto PF](#objeto-PJ) do esposo/esposa da pessoa (obrigatório apenas quando "compulsory_separation_of_goods" for "total_communion_of_goods", "partial_communion_of_goods", "final_participation_of_acquisitions" ou "compulsory_separation_of_goods") | **[Objeto PF](#objeto-PF)** |
| is_pep *(obrigatório)* | Declaração se a pessoa é PEP (http://www.portaldatransparencia.gov.br/download-de-dados/pep) valor booleano | false |
| individual_document_number *(obrigatório)* | CPF da pessoa (apenas números) | "34651104630" |
| document_identification *(obrigatório)* | **DOCUMENT_KEY** PDF do documento de identificação da pessoa com foto (RG ou CNH) ([enviado previamente](?file=331)) | --- |
| document_identification_number *(obrigatório)* | Número do documento de identificação da pessoa enviado em document_identification | "232479719" |
| email *(obrigatório)* | Email da pessoa | "api@qitech.work" |
| phone *(obrigatório)* | Telefone da pessoa | **[Objeto Telefone](#objeto-telefone)** (descrito abaixo) |
| addresss *(obrigatório)* | Endereço da pessoa | **[Objeto Endereço](#objeto-endereco)** (descrito abaixo) |
| proof_of_residence *(obrigatório)* | **DOCUMENT_KEY** PDF do comprovante de endereço do endereço enviado ([enviado previamente](?file=331)) | "780456bd-1eec-4e5f-82c0-d8c3921497ea" |


Exemplo:

```json
{
    "person_type": "natural",
    "name": "Patrícia Tereza Bernardes",
    "mother_name": "Maria Mariane",
    "birth_date": "1990-05-06",
    "profession": "Deputada",
    "nationality": "Brasileira",
    "marital_status": "married",
    "is_pep": true,
    "property_system": "total_communion_of_goods",
    "individual_document_number": "34651104630",
    "document_identification_number": "232479719",
    "email": "patricia.tereza@yopmail.com",
    "phone": {
        "country_code": "055",
        "area_code": "11",
        "number": "9128281359"
    },
    "address": {
        "street": "Passagem Mariana",
        "state": "PA",
        "city": "Ananindeua",
        "neighborhood": "Águas Lindas",
        "number": "660",
        "postal_code": "67118003",
        "complement": "complemento"
    },
    "spouse": Objetos PF,
    "wedding_certificate": DOCUMENT_KEY, (somente se casado)
    "document_identification": DOCUMENT_KEY,
    "proof_of_residence": DOCUMENT_KEY,
}
```

#### Objeto Telefone

Este objeto, presente tento no objeto PF quanto no objeto PJ, é um simples objeto para representar um númetro telefônico.

| Campo | Descrição | Exemplo
|---|---|---|
| country_code *(obrigatório)* | Código DDI do telefone (https://ddi.guiamais.com.br/)(deve ter obrigatoriamente 3 dígitos)  | "055" |
| area_code *(obrigatório)* | Código DDD do telefone (https://ddd.guiamais.com.br/) | "11" |
| number *(obrigatório)* | Número de telefone (apenas números) | "999999999" |

Exemplo:

```json
{
   "country_code":"055",
   "area_code":"11",
   "number":"9128281359"
}
```

#### Objeto Endereço


Este objeto, presente tento no objeto PF quanto no objeto PJ, é um simples objeto para representar um endereço.

| Campo | Descrição | Exemplo
|---|---|---|
| street *(obrigatório)* | Rua do endereço  | "Av. Brigadeiro Faria Lima" |
| state *(obrigatório)* | Estado do endereço (com dóis caracteres maiúsculos) | "SP" |
| city *(obrigatório)* | Cidade do endereço | "São Paulo" |
| neighborhood *(obrigatório)* | Bairro do endereço | "Jardim Paulistano" |
| number *(obrigatório)* | Número da rua | "2391" |
| postal_code *(obrigatório)* | CEP do endereço (http://www.buscacep.correios.com.br/sistemas/buscacep/) (apenas números) | "01452905" |
| complement *(obrigatório)* | Complemento do endereço (texto livre) | "1º Andar" |

Exemplo:

```json
{
   "street":"Passagem Mariana",
   "state":"PA",
   "city":"Ananindeua",
   "neighborhood":"Águas Lindas",
   "number":"660",
   "postal_code":"67118003",
   "complement":"complemento"
}
```

### Objeto Conta Bancária 

Uma emissão de dívida deve conter as informações bancárias para desembolso, uma conta do tomador. O Objeto Conta Bancária descreve essa conta:

| Campo | Descrição | Exemplo
|---|---|---|
| bank_code *(obrigatório)* | Código COMPE da instituição financeira (https://www.bcb.gov.br/pom/spb/estatistica/port/ASTR003.pdf) (com 3 dígitos) | "329" |
| branch_number *(obrigatório)* | Número da agência | "001" |
| account_number *(obrigatório)* | Número da conta | "15570" |
| account_digit | Dígito verificador da conta (obrigatório caso haja) | "4" |


Exemplo:
```json
{
   "bank_code":"329",
   "branch_number":"001",
   "account_number":"15570",
   "account_digit":"4"
}
```

### Objeto Financeiro 

O objeto financeiro descreve as informações financeiras da emissão. Aqui são definidas a taxa de juros, carência e valor da dívida entre outros. O Objeto Financeiro possui as seguintes características:

| Campo | Descrição | Exemplo
|---|---|---|
| amount *(obrigatório)*| Valor da dívida emitida | 50000.37 |
| type *(obrigatório)*| Tipo de juros aplicado na dívida: "cdi_plus", "cdi_perc", "pre_sac", "pre_price"  | cdi_plus |
| annual_interest_rate | Valor porcentual da parcela prefixada do juros (atenção: 1 = 100%) | 0.02 |
| disbursement_date *(obrigatório)*| data de desembolso (formato "AAAA-MM-DD") | "2019-07-25" |
| interest_grace_period *(obrigatório)*| Carência do juros (em meses) | 0 |
| principal_grace_period *(obrigatório)*| Carência do principal (em mese) | 0 
| number_of_installments *(obrigatório)*| número de parcelas (mensais) | 10 |
| fine_configuration *(obrigatório)*| Configuração de multa | **[Objeto Multa](#objeto-multa)** (descrito abaixo) |


Exemplo:

```json
{
   "amount":5000,
   "type":"cdi_plus",
   "annual_interest_rate":0.02,
   "disbursement_date":"2019-07-25",
   "fine_configuration":{
      "contract_fine_rate":0.02,
      "interest_base":"Base de dias",
      "monthly_rate":0.01
   },
   "interest_grace_period":0,
   "number_of_installments":10,
   "principal_grace_period":0,
   "rebate":100,
}
```

#### Objeto Multa

Objeto que descreve a multa de uma dívida:

| Campo | Descrição | Exemplo
|---|---|---|
| contract_fine_rate  *(obrigatório)* | Valor porcentual fixo da multa | 0.02 |
| interest_base  *(obrigatório)* | Contagem do tempo para multa ("calendar_days" para dias corrido, "workdays" para dias úteis) | "workdays" |
| monthly_rate  *(obrigatório)* | Valor porcentual mensal da multa | 0.01 |


Exemplo:
```json
{
   "contract_fine_rate":0.02,
   "interest_base":"workdays",
   "monthly_rate":0.01
}
```

## Response

A resposta desse pedido de dívida retornará o plano de pagamento assim como uma **DEBT_KEY**, que é o identificador da dívida na QI SCD.

- status: 200
- body (após ser decodado): 
  
```json
--- UNDER CONSTRUCTION --
```

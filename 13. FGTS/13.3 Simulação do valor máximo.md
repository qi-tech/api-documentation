# Simulação do Valor Máximo

<br>

Feita a consulta, o próximo passo é simular o máximo valor possível desembolsável para o cliente.

## Request / Etapa de validação

- endpoint: /baas/fgts_simulation
- method: POST
- body (antes de ser assinado)

<br>

```json
{
	"borrower": {
		"person_type": "natural"
	},
	"financial": {
		"desired_installments": [
		  {
			"due_date": "2021-08-09",
			"total_amount": 800
		  },
		  {
			"due_date": "2022-08-09",
			"total_amount": 758
		  },
		],
		"interest_type": "pre_price_days",
		"disbursement_date": "2021-07-09",
		"fine_configuration": {
			"monthly_rate": 0,
			"interest_base": "calendar_days",
			"contract_fine_rate": 0
		},
		"annual_interest_rate": 0.05,
		"credit_operation_type": "ccb",
		"interest_grace_period": 0,
		"number_of_installments": 2,
		"principal_grace_period": 0
	}
}
```

<br>

#### Atributos do payload de consulta de simulação do valor máximo
Consiste em dois objetos, `borrower` e `financial`

<br>

| Campo                           | Descrição                                                                         | Exemplo                                             |
|---------------------------------|-----------------------------------------------------------------------------------|-----------------------------------------------------|
| **`borrower`** _(obrigatório)_  | Tomador da dívida, neste caso precisamos apenas do tipo de pessoa ("person_type") | "natural"                                           |
| **`financial`** _(obrigatório)_ | Objeto Financial (adaptado para o saque-aniversário FGTS)                         | **[Objeto Financial FGTS](#objeto-financial-fgts)** |

<br>

#### Objeto Financial FGTS - contém todas as informações de um objeto Financial, mas com a adição dos `desired installments`, que representam os valores de cada parcela simulada pelo cliente <a name=objeto-financial-fgts></a>

<br>

| Campo                                        | Descrição                                                                                         | Exemplo                                       |
|----------------------------------------------|---------------------------------------------------------------------------------------------------|-----------------------------------------------|
| **`desired_installments`** _(obrigatório)_   | Valor de desembolso para o cliente                                                                | **[Objeto Installment](#objeto-installment)** |
| **`interest_type`** _(obrigatório)_          | Tipo de juros aplicado na dívida: "cdi_plus", "cdi_perc", "pre_sac", "pre_price" "pre_price_days" | "cdi_plus"                                    |
| **`credit_operation_type`** _(obrigatório)_  | Tipo de operação de crédito: "ccb", "cce", "cci", "nce"                                           | "ccb"                                         |
| **`annual_interest_rate`** _(obrigatório)_   | Valor porcentual da parcela prefixada de juros (atenção: 1 = 100%)                                | 0.05                                          |
| **`disbursement_date`** _(obrigatório)_      | Data de desembolso (formato "AAAA-MM-DD") (excludente de disbursement_date)                       | "2019-07-25"                                  |
| **`disbursement__end_date`** _(obrigatório)_ | Data final do período de desembolso (formato "AAAA-MM-DD") (excludente de disbursement_date)      | "2019-07-25"                                  |
| **`issue_date`** _(obrigatório)_             | Data de emissão da CCB (formato "AAAA-MM-DD")                                                     | 2019-07-25                                    |
| **`interest_grace_period`** _(obrigatório)_  | Carência de juros (em meses)                                                                      | 0                                             |
| **`principal_grace_period`** _(obrigatório)_ | Carência do principal (em meses)                                                                  | 0                                             |
| **`number_of_installments`** _(obrigatório)_ | Número de parcelas (anuais)                                                                       | 2                                             |
| **`fine_configuration`** _(obrigatório)_     | Configuração de multa                                                                             | **[Objeto Multa](#object-multa)**             |


Exemplo:
```json
{
    "desired_installments": [
      {
        "due_date": "2021-08-09",
        "total_amount": 800
      },
      {
        "due_date": "2022-08-09",
        "total_amount": 758
      },
    ],
    "interest_type": "pre_price_days",
    "disbursement_date": "2021-07-09",
    "fine_configuration": {
        "monthly_rate": 0,
        "interest_base": "calendar_days",
        "contract_fine_rate": 0
    },
    "annual_interest_rate": 0.05,
    "credit_operation_type": "ccb",
    "interest_grace_period": 0,
    "number_of_installments": 2,
    "principal_grace_period": 0
}
```

<br>

#### Objeto Installment - contém os valores simulados de cada parcela em determinado ano. <a name=objeto-installment></a>

| Campo                              | Descrição                                  | Exemplo      |
|------------------------------------|--------------------------------------------|--------------|
| **`due_date`** _(obrigatório)_     | Data Hora do Pedido (formato "AAAA-MM-DD") | "2021-08-09" |
| **`total_amount`** _(obrigatório)_ | Valor total da parcela                     | 800          |

Exemplo:

```json
{
    "desired_installments": [
      {
        "due_date": "2021-08-09",
        "total_amount": 800
      },
      {
        "due_date": "2022-08-09",
        "total_amount": 758
      },
    ],
}
```

<br>

#### Objeto Multa <a name=object-multa></a>

Objeto que descreve a multa de uma dívida:

| Campo | Descrição | Exemplo |
|---|---|---|
| **`contract_fine_rate`**  *(obrigatório)* | Valor porcentual fixo da multa | 0 |
| **`interest_base`**  *(obrigatório)* | Contagem do tempo para multa ("calendar_days" para dias corridos, "workdays" para dias úteis) | "workdays" |
| **`monthly_rate`**  *(obrigatório)* | Valor porcentual mensal da multa | 0 |

Exemplo:

```json
{
   "contract_fine_rate":0.02,
   "interest_base":"workdays",
   "monthly_rate":0.01
}
```
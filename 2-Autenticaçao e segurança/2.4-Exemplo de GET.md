# Exemplo de GET

Requisição **GET** para o endpoint **/test** <br><br>

##### Header
```bash
GET "/test/{{API-CLIENT-KEY}}"  HTTPS
Host: "api-auth.sandbox.qitech.app"
API-CLIENT-KEY: "16c8a1ec-8d75-47a1-b138-46746713b8d8"
Authorization: "QIT" + " " + API-CLIENT-KEY + ":" + Signature
```
<br>

### Preparando a Signature para o Header

1. Tenha em mãos uma **Chave Privada de Cliente** (CLIENT_PRIVATE_KEY):
```bash
-----BEGIN EC PRIVATE KEY-----
MIHcAgEBBEIAyRa+hgmiOpzUN+/0vAMLZxeK7MWtJnBU+eFpp+ydOgRUbQRfg/Mv
tLiKPNOfG9h1Nf45nBG4TQvzSEgLn5zcpY2gBwYFK4EEACOhgYkDgYYABAHOrn3p
sZdRWjR5or0J3eBq+oaizCKKGvZFoNSBmV5WoXcxZJfWE8KLNjqo2+DzxIpEd4ua
PaJJHD6yY577MLWYXQCAJJ3a3/Pey7Blcu6M2rxKnCst5BQ5rV4OEz0HZv4KbjOI
lLjqJ0I/IUa9RmbS7oaTTm55ExLrGc20hJA1L755Dw==
-----END EC PRIVATE KEY-----
```
<br>

2. Vá para o site [https://jwt.io/](https://jwt.io/) e selecione uma
   biblioteca adequeada para sua linguagem que tenha suporte ao
   algoritmo de encriptação ES512.

3. Para gerar a **Signature** são necessários 2 JSONs: o **HeaderJWT** e
   o **BodyJWT**.
    1. **HeaderJWT** deve ser composto por:
    ```json
    {
        "alg": "ES512",
        "typ": "JWT"
    }
    ```
    <br>

    2. **BodyJWT** deve ser composto por:
    ```json
    {
        "sub": "16c8a1ec-8d75-47a1-b138-46746713b8d8",
        "signature": "GET" + "\n" + "\n" + "\n" + "Wed, 16 Oct 2019 13:18:24 GMT" + "\n" + "/test"
    }
    ```
    <br>

4. Com a **CLIENT_PRIVATE_KEY**, o **HeaderJWT** e o **BodyJWT** utilize
   o método de **encode** da biblioteca selecionada para gerar a
   **Signature**. Abaixo é apresentado um exemplo de Signature gerada a
   partir dos parâmetros dados acima:
```bash
eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzUxMiJ9.
eyJzdWIiOiIxNmM4YTFlYy04ZDc1LTQ3YTEtYjEzOC00Njc0NjcxM2I4ZDgiLCJzaWduYXR1cmUiOiJHRVRcblxuXG5XZWQsIDE2IE9jdCAyMDE5IDEzOjE4OjI0IEdNVFxuL3Rlc3QifQ.
ALhWx4z0QUdKNzi_q2l7GY-jVXVIvd9k8oAtyrtZzQCNGz1TML2HIhbZhhpxsvlKDos8XIfLDtSPBAC86IlVoN-vACq8Ac08LlwcuCO6DoBjzG4AxlUmP8w5NBc_Ko3k-bkTn1I2PKP02zlddCdZe2uuVyLefAOXAFal7z-0u1BuCe3w
```
<br>
   
### Lendo a Resposta

1. Tenha em mãos uma **Chave Pública de API** (API_PUBLIC_KEY):
```bash
-----BEGIN PUBLIC KEY-----
MIGbMBAGByqGSM49AgEGBSuBBAAjA4GGAAQBDb+aZEZL+/kJPVl7UkenxDxAZ5pP
spInjNRhKm2OWqRjaxADn3ljkUf0uodxNx6JhS4hJNexHzTYZ5DPoWJpoHwAKmrl
VGohj/xxedcmwNfxhjavvNsJ+WK2bmBSl7KDuZKY/6+kxCHiVp3gRN42rEXpnjCG
wW6gCqJdukkBqAMfbyg=
-----END PUBLIC KEY-----
```
<br>

2. O payload da resposta HTTP será no formato abaixo:
```json
{
    "encoded_body":"eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzUxMiJ9.eyJhcGlfY2xpZW50X2tleSI6IjE2YzhhMWVjLThkNzUtNDdhMS1iMTM4LTQ2NzQ2NzEzYjhkOCIsInN1Y2Nlc3MiOiJDb25ncmF0cyEifQ.AMOviGZ22-ALFRXgXs66UOBJoMHRxqpVebvRBLMgRTtEInNvdDpZNfepLz30VPmvL8vsGp-hrDJG050AnfV1z2y8AaNV6lHgd3CnDHup-f2bpGAu5gLe4AYXMzG138dt7xXKHcy9Sj2y4Jsf2MVyscxSz7z3cuDqn9re3fmPet2RvsrI", 
}
```

3. Com a **API_PUBLIC_KEY** e o valor de **encoded_body** utilize o
   método de **decode** da biblioteca selecionada para gerar o payload
   da resposta HTTP original. Abaixo é apresentado um exemplo de payload
   gerado a partir dos parâmetros dados acima:
```json
{
    "api_client_key": "16c8a1ec-8d75-47a1-b138-46746713b8d8",
    "success": "Congrats!"
}
```